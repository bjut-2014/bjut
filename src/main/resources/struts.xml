<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE struts PUBLIC
	"-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
	"http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>

	<constant name="struts.enable.DynamicMethodInvocation" value="false" />
	<constant name="struts.devMode" value="true" />

	<!-- 把struts的请求委托给spring管理, 作用:创建Action实例的过程由spring处理,其他的还是有struts2自己处理 -->
	<constant name="struts.objectFactory" value="spring" />
	<!-- 去掉请求url中的‘.action’后缀 -->
	<constant name="struts.action.extension" value="," />

	<package name="default" namespace="/" extends="struts-default">

		<!-- session过期拦截器 -->
		<interceptors>
			<interceptor name="loginedCheck"
				class="cn.internship.interceptor.LoginedCheckInterceptor" />
			<interceptor-stack name="mystack">
				<interceptor-ref name="loginedCheck" />
				<interceptor-ref name="defaultStack">
				</interceptor-ref>
			</interceptor-stack>
		</interceptors>
		<!-- end -->
		
		<!-- 所有的action都配置一个拦截器 -->
		<default-interceptor-ref name="mystack">
		</default-interceptor-ref>
		<!-- end -->
		
		<!-- 定义全局result -->
		<global-results>
			<result name="tologin" type="redirect">/login.jsp</result>
		</global-results>
		<!-- end -->

		<!-- 验证码 -->
		<action name="verifyCodeAction" class="verifyCodeAction">
			<result name="success" type="stream">
				<param name="contentType">image/jpeg</param>
				<param name="inputName">inputStream</param>
			</result>
		</action>
		<!-- end -->

		<!-- 登陆 -->
		<action name="login" class="loginAction">
			<result name="ssuccess" type="redirectAction">index</result>
			<result name="tsuccess" type="redirectAction">tch-index</result>
			<result name="input">/login.jsp</result>
		</action>
		<!-- end -->
		<!-- 注销 -->
		<action name="logout" class="loginAction" method="logout">
			<result name="logout">/login.jsp</result>
		</action>
		<!-- end -->
		<!-- 学生相关操作 -->
		<action name="index" class="studentAction">
			<result>/WEB-INF/views/index.jsp</result>
		</action>
		<action name="stu-info" class="studentAction" method="info">
			<result>/WEB-INF/views/student/studentinfo.jsp</result>
		</action>
		<action name="scourseExample" class="">
			<result>/WEB-INF/views/student/scourseExample.jsp</result>
		</action>		
		<!-- end -->
		<!-- 老师相关操作 -->
		<action name="tch-index" class="teacherAction">
			<result>/WEB-INF/views/teacher/index.jsp</result>
		</action>		
		<action name="tch-info" class="teacherAction" method="info">
			<result>/WEB-INF/views/teacher/teacherinfo.jsp</result>
		</action>
		<action name="tch-course" class="">
			<result>/WEB-INF/views/teacher/teachercourses.jsp</result>
		</action>
		<action name="tcourseExample" class="">
			<result>/WEB-INF/views/teacher/tcourseExample.jsp</result>
		</action>
		<action name="thomework" class="">
			<result>/WEB-INF/views/teacher/thomework.jsp</result>
		</action>
		<!-- end -->
		<!-- 课程相关操作 -->
		<action name="course" class="courseAction">
			<result>/WEB-INF/views/student/studentcourses.jsp</result>
		</action>
		<!-- end -->
		<!-- 作业相关操作 -->
		<action name="uploadHomework" class="homeworkAction">
			<result type="redirectAction">course</result>
		</action>
		<!-- end -->
	</package>


</struts>
